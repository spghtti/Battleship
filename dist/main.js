!function(){var e={503:function(e,t,n){function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=n(937),l=a("Player",!1),i=a("Computer",!0),u=function(e,t){return e.every((function(e,n){return e===t[n]}))},s=function(e,t){for(var n=0;n<e.length;n++)if(u(e[n],t))return!0;return!1},c=function(e,t,n,r,o){if("x"===r){for(var a=0;a<o;a++)if(s(e,[a+t,n]))return!0;return!1}if("y"===r){for(var l=0;l<o;l++)if(s(e,[t,l+n]))return!0;return!1}};t.p1=l,t.CPU=i,t.randomizeShips=function(e){for(var t=[[5,"carrier"],[4,"battleship"],[3,"destroyer"],[2,"submarine"],[1,"boat"]],n=[],o=function(e){var t=Math.round(Math.random());if(0===t){var r=Math.floor(10*Math.random())+1-e;r<1&&(r+=e);for(var o=Math.floor(10*Math.random())+1;c(n,r,o,"x",e);)r=Math.floor(10*Math.random())+1-e,o=Math.floor(10*Math.random())+1,r<1&&(r+=e);for(var a=r+e,l=[r,a].sort((function(e,t){return e-t})),i=l[0];i<=l[1];i++)n.push([i,o]);return[r,o,a,o]}if(1===t){var u=Math.floor(10*Math.random())+1,s=Math.floor(10*Math.random())+1-e;for(s<1&&(s+=e);c(n,u,s,"y",e);)s=Math.floor(10*Math.random())+1-e,u=Math.floor(10*Math.random())+1,s<1&&(s+=e);for(var d=s+e,f=[s,d].sort((function(e,t){return e-t})),h=f[0];h<=f[1];h++)n.push([u,h]);return[u,s,u,d]}},a=0;a<t.length;a++){var i=t[a][0]-1;e.placeShip.apply(e,r(t[a]).concat(r(o(i)))),console.log(l.fleet)}},t.startGame=function(){var e=document.getElementById("grid-one"),t=document.getElementById("grid-two"),n=document.getElementById("rotate-button");e.style.pointerEvents="none",t.style.pointerEvents="auto",n.style.pointerEvents="none",n.className+=" inactive-button"}},937:function(e,t,n){function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var o=n(963);e.exports=function(e,t){var n=[],a=[],l=[],i=[],u=[],s=function(e,t){return e.every((function(e,n){return e===t[n]}))},c=function(t,r){for(var o=document.getElementById("status"),c=0;c<u.length;c++)for(var d=0;d<Object.keys(u[c].positions).length;d++)if(s(u[c].positions[d],[t,r]))return u[c].hit(t,r),u[c].isSunk()?(o.textContent="".concat(e,"'s ").concat(u[c].name," has been sunk!"),n.push([t,r]),i.push([t,r]),l.push([t,r]),"sink"):(n.push([t,r]),l.push([t,r]),"hit");return a.push([t,r]),l.push([t,r]),"miss"},d=function(e,t){for(var n=0;n<e.length;n++)if(s(e[n],t))return!0;return!1};return{checkForLoss:function(){for(var e=document.getElementById("status"),t=0,n=0;n<u.length;n++)t+=u[n].positions.length;return 0===t&&(e.textContent="Game over!",!0)},arrayEquals:s,receiveCpuAttack:function(){var e,t=function(){return n.length>0&&i.length>0&&s(n[n.length-1],i[i.length-1])};c.apply(void 0,function(e){if(Array.isArray(e))return r(e)}(e=function(){for(var e=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1;d(l,[e,r]);)e=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1;if(n.length>0){var o=n[n.length-1];if(t()||(console.log("Second attack"),o[0]+1<11&&!d(l,[o[0]+1,o[1]])?(e=o[0]+1,r=o[1]):o[0]+-1>0&&!d(l,[o[0]+-1,o[1]])?(e=o[0]+-1,r=o[1]):o[1]+1<11&&!d(l,[o[0],o[1]+1])?(e=o[0],r=o[1]+1):o[1]+-1>0&&!d(l,[o[0],o[1]+-1])&&(e=o[0],r=o[1]+-1)),n.length>1&&!t()){var a=n[n.length-2],i=o[0]-a[0]+(o[1]-a[1]);t()||1!==i&&-1!==i||(console.log("Continuing chain"),1!==i&&-1!==i||(o[0]!==a[0]&&(e=o[0]-a[0]+o[0],r=o[1]),o[1]!==a[1]&&(r=o[1]-a[1]+o[1],e=o[0])),d(l,[e,r])&&(e=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1))}}return[e,r]}())||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},playerName:e,fleet:u,placeShip:function(e,t,n,r,a,l){var i=o(e);if(i.name=t,n!==a)for(var s=[n,a].sort((function(e,t){return e-t})),c=s[0];c<=s[1];c++)i.positions.push([c,r]);else for(var d=[r,l].sort((function(e,t){return e-t})),f=d[0];f<=d[1];f++)i.positions.push([n,f]);u.push(i)},receiveAttack:c,enemyHits:n,missedEnemyAttacks:a,sinks:i,allEnemyAttacks:l}}},963:function(e){e.exports=function(e){var t=[],n=[];return{name:"",positions:t,hitPositions:n,isSunk:function(){return this.hitPositions.length===e},length:e,hit:function(e,r){n.push([e,r]),t.splice(function(e,t){for(var n={},r=0;r<t.length;r++)n[t[r]]=r;return n.hasOwnProperty(e)?n[e]:-1}([e,r],t),1)}}}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}!function(){var e=n(503),t=e.p1,r=e.CPU,o=e.randomizeShips,a=e.startGame;function l(){for(var e=["","A","B","C","D","E","F","G","H","I","J"],t=document.getElementById("grid-one"),n=document.getElementById("grid-two");t.hasChildNodes();)t.removeChild(t.lastChild);for(;n.hasChildNodes();)n.removeChild(n.lastChild);for(var r=0;r<e.length;r++){var o=document.createElement("th"),a=document.createElement("th");o.textContent=e[r],a.textContent=e[r],t.appendChild(o),n.appendChild(a)}for(var l=0;l<10;l++){var i=document.createElement("tr"),u=document.createElement("tr"),s=document.createElement("th"),c=document.createElement("th");s.textContent=l+1,c.textContent=l+1,t.appendChild(i).className="table-row",n.appendChild(u).className="table-row",i.appendChild(s).className="table-row-header",u.appendChild(c).className="table-row-header";for(var d=0;d<10;d++){var f=document.createElement("td"),h=document.createElement("td");f.setAttribute("value","".concat(d+1,", ").concat(l+1)),h.setAttribute("value","".concat(d+1,", ").concat(l+1)),f.dataset.index=10*l+d+1-1,i.appendChild(f).className="gridOne-table-cell",u.appendChild(h).className="gridTwo-table-cell"}}}function i(e){for(var t=e.split(", "),n=[],r=0;r<t.length;r++)n.push(Number(t[r]));return n}var u=function(e,t){return e.every((function(e,n){return e===t[n]}))},s=function(e,t){for(var n=0;n<e.length;n++)if(u(e[n],t))return!0;return!1};function c(){for(var e=document.querySelectorAll(".gridOne-table-cell"),n=0;n<t.fleet.length;n++)for(var r=0;r<t.fleet[n].positions.length;r++)for(var o=0;o<e.length;o++)u(t.fleet[n].positions[r],i(e[o].attributes.value.value))&&(e[o].style.background="rgba(38, 0, 255, 0.9)")}function d(){var e=document.querySelectorAll(".gridTwo-table-cell"),n=document.getElementById("gameboards"),o=document.getElementById("grid-two"),a=document.getElementById("randomize-button");o.addEventListener("click",(function(){a.className+=" inactive-button"}));for(var l=function(o){var a=i(e[o].attributes.value.value)[0],l=i(e[o].attributes.value.value)[1];e[o].addEventListener("click",(function(){var n=document.getElementById("status");t.checkForLoss()||r.checkForLoss()||(n.textContent="",function(e){for(var t=i(e.attributes.value.value),n=!1,o=0;o<r.fleet.length;o++)for(var a=0;a<Object.keys(r.fleet[o].positions).length;a++)u(r.fleet[o].positions[a],t)&&(e.style.background="rgba(38, 0, 255, 0.8)",n=!0);!1===n&&(e.style.background="rgb(109, 109, 109)")}(this),r.receiveAttack(a,l),console.log(r),e[o].className+=" inactive")})),e[o].addEventListener("click",(function(){n.className+=" inactive",t.checkForLoss()||r.checkForLoss()||setTimeout((function(){t.receiveCpuAttack(),console.log(t),n.className-=" inactive",function(){for(var e=t.missedEnemyAttacks,n=document.querySelectorAll(".gridOne-table-cell"),r=0;r<e.length;r++)for(var o=0;o<n.length;o++)u(e[r],i(n[o].attributes.value.value))&&(n[o].style.background="rgb(109, 109, 109)");for(var a=0;a<t.fleet.length;a++)for(var l=0;l<Object.keys(t.fleet[a].hitPositions).length;l++)for(var s=0;s<n.length;s++)u(t.fleet[a].hitPositions[l],i(n[s].attributes.value.value))&&(n[s].style.background="rgba(255, 0, 0, 1)")}()}),1e3)}))},s=0;s<e.length;s++)l(s)}function f(){t.enemyHits.length=0,t.missedEnemyAttacks.length=0,t.allEnemyAttacks.length=0,t.sinks.length=0,t.fleet.length=0,r.enemyHits.length=0,r.missedEnemyAttacks.length=0,r.allEnemyAttacks.length=0,r.sinks.length=0,r.fleet.length=0}var h,m,v,g=[[4,"carrier"],[3,"battleship"],[2,"destroyer"],[1,"submarine"],[0,"boat"]],p=!0;function y(){var e=document.querySelectorAll(".gridOne-table-cell");p?e.forEach((function(e){e.removeEventListener("mouseenter",b),e.removeEventListener("mouseleave",E)})):e.forEach((function(e){e.removeEventListener("mouseenter",k),e.removeEventListener("mouseleave",A)}))}function b(){for(var e=document.querySelectorAll(".gridOne-table-cell"),n=Number(this.dataset.index),r=[],o=0;o<t.fleet.length;o++)for(var a=0;a<t.fleet[o].positions.length;a++)r.push(t.fleet[o].positions[a]);for(var l=0;l<=g[0][0];l++)s(r,i(e[n+l].attributes.value.value))||(e[n+l].style.background="rgb(109, 109, 109)")}function E(){for(var e=document.querySelectorAll(".gridOne-table-cell"),n=Number(this.dataset.index),r=[],o=0;o<t.fleet.length;o++)for(var a=0;a<t.fleet[o].positions.length;a++)r.push(t.fleet[o].positions[a]);for(var l=0;l<=g[0][0];l++)s(r,i(e[n+l].attributes.value.value))||(e[n+l].style.background="")}function k(){for(var e=document.querySelectorAll(".gridOne-table-cell"),n=Number(this.dataset.index),r=[],o=0;o<t.fleet.length;o++)for(var a=0;a<t.fleet[o].positions.length;a++)r.push(t.fleet[o].positions[a]);for(var l=0;l<=g[0][0];l++)s(r,i(e[n+10*l].attributes.value.value))||(e[n+10*l].style.background="rgb(109, 109, 109)")}function A(){for(var e=document.querySelectorAll(".gridOne-table-cell"),n=Number(this.dataset.index),r=[],o=0;o<t.fleet.length;o++)for(var a=0;a<t.fleet[o].positions.length;a++)r.push(t.fleet[o].positions[a]);for(var l=0;l<=g[0][0];l++)s(r,i(e[n+10*l].attributes.value.value))||(e[n+10*l].style.background="")}function C(){var e=document.getElementById("status");1===g.length?(e.textContent="Start!",a()):g.shift()}function M(){var e=i(this.attributes.value.value),n=document.querySelectorAll(".gridOne-table-cell"),r=Number(this.dataset.index),o=g[0][0],a=g[0][1];if(p){if(!function(){if(p){for(var e=0;e<=o;e++)if("true"===n[e+r].dataset.occupied)return!0;return!1}for(var t=0;t<=o;t++)if("true"===n[r+10*t].dataset.occupied)return!0;return!1}()){t.placeShip(o+1,a,e[0],e[1],e[0]+o,e[1]);for(var l=0;l<=o;l++)n[l+r].dataset.occupied="true";C(),y(),S(g[0][0],p)}}else{t.placeShip(o+1,a,e[0],e[1],e[0],e[1]+o);for(var u=0;u<=o;u++)n[r+10*u].dataset.occupied="true";C(),y(),S(g[0][0],p)}}function S(e,n){for(var r=document.querySelectorAll(".gridOne-table-cell"),o=e,a=0;a<r.length;a++)n?a+o<100&&a%10+o<10&&(r[a].addEventListener("click",M),r[a].addEventListener("click",c),r[a].addEventListener("click",(function(){console.log(t.fleet)})),r[a].addEventListener("mouseenter",b),r[a].addEventListener("mouseleave",E)):a+10*o<100&&(r[a].addEventListener("click",M),r[a].addEventListener("click",c),r[a].addEventListener("click",(function(){console.log(t.fleet)})),r[a].addEventListener("mouseenter",k),r[a].addEventListener("mouseleave",A))}function I(){var e=document.getElementById("status"),t=document.getElementById("grid-two"),n=document.getElementById("grid-one");e.textContent="Place your ships",t.style.pointerEvents="none",n.style.pointerEvents="auto",document.getElementById("rotate-button").className-="inactive-button",g=[[4,"carrier"],[3,"battleship"],[2,"destroyer"],[1,"submarine"],[0,"boat"]],l(),f(),d(),S(g[0][0],p),o(r),console.log(r)}h=document.getElementById("randomize-button"),m=document.getElementById("new-game-button"),v=document.getElementById("rotate-button"),h.addEventListener("click",(function(){l(),d(),f(),o(t),o(r),c()})),m.addEventListener("click",(function(){h.className-=" inactive-button",I()})),v.addEventListener("click",(function(){y(),p=!p})),v.addEventListener("click",(function(){S(g[0][0],p)})),I()}()}();