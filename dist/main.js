!function(){var t={503:function(t,e,n){function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var a=n(937),l=a("Player",!1),i=a("Computer",!0),u=function(t,e){return t.every((function(t,n){return t===e[n]}))},c=function(t,e){for(var n=0;n<t.length;n++)if(u(t[n],e))return!0;return!1},s=function(t,e,n,r,o){if("x"===r){for(var a=0;a<o;a++)if(c(t,[a+e,n]))return!0;return!1}if("y"===r){for(var l=0;l<o;l++)if(c(t,[e,l+n]))return!0;return!1}};e.p1=l,e.CPU=i,e.randomizeShips=function(t){for(var e=[[5,"carrier"],[4,"battleship"],[3,"destroyer"],[2,"submarine"],[1,"boat"]],n=[],o=function(t){var e=Math.round(Math.random());if(0===e){var r=Math.floor(10*Math.random())+1-t;r<1&&(r+=t);for(var o=Math.floor(10*Math.random())+1;s(n,r,o,"x",t);)r=Math.floor(10*Math.random())+1-t,o=Math.floor(10*Math.random())+1,r<1&&(r+=t);for(var a=r+t,l=[r,a].sort((function(t,e){return t-e})),i=l[0];i<=l[1];i++)n.push([i,o]);return[r,o,a,o]}if(1===e){var u=Math.floor(10*Math.random())+1,c=Math.floor(10*Math.random())+1-t;for(c<1&&(c+=t);s(n,u,c,"y",t);)c=Math.floor(10*Math.random())+1-t,u=Math.floor(10*Math.random())+1,c<1&&(c+=t);for(var f=c+t,d=[c,f].sort((function(t,e){return t-e})),h=d[0];h<=d[1];h++)n.push([u,h]);return[u,c,u,f]}},a=0;a<e.length;a++){var i=e[a][0]-1;t.placeShip.apply(t,r(e[a]).concat(r(o(i)))),console.log(l.fleet)}}},937:function(t,e,n){function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var o=n(963);t.exports=function(t,e){var n=[],a=[],l=[],i=[],u=[],c=function(t,e){return t.every((function(t,n){return t===e[n]}))},s=function(e,r){for(var o=document.getElementById("status"),s=0;s<u.length;s++)for(var f=0;f<Object.keys(u[s].positions).length;f++)if(c(u[s].positions[f],[e,r]))return u[s].hit(e,r),u[s].isSunk()?(o.textContent="".concat(t,"'s ").concat(u[s].name," has been sunk!"),n.push([e,r]),i.push([e,r]),l.push([e,r]),"sink"):(n.push([e,r]),l.push([e,r]),"hit");return a.push([e,r]),l.push([e,r]),"miss"},f=function(t,e){for(var n=0;n<t.length;n++)if(c(t[n],e))return!0;return!1};return{checkForLoss:function(){for(var t=document.getElementById("status"),e=0,n=0;n<u.length;n++)e+=u[n].positions.length;return 0===e&&(t.textContent="Game over!",!0)},arrayEquals:c,receiveCpuAttack:function(){var t,e=function(){return n.length>0&&i.length>0&&c(n[n.length-1],i[i.length-1])};s.apply(void 0,function(t){if(Array.isArray(t))return r(t)}(t=function(){for(var t=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1;f(l,[t,r]);)t=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1;if(n.length>0){var o=n[n.length-1];if(e()||(console.log("Second attack"),o[0]+1<11&&!f(l,[o[0]+1,o[1]])?(t=o[0]+1,r=o[1]):o[0]+-1>0&&!f(l,[o[0]+-1,o[1]])?(t=o[0]+-1,r=o[1]):o[1]+1<11&&!f(l,[o[0],o[1]+1])?(t=o[0],r=o[1]+1):o[1]+-1>0&&!f(l,[o[0],o[1]+-1])&&(t=o[0],r=o[1]+-1)),n.length>1&&!e()){var a=n[n.length-2],i=o[0]-a[0]+(o[1]-a[1]);e()||1!==i&&-1!==i||(console.log("Continuing chain"),1!==i&&-1!==i||(o[0]!==a[0]&&(t=o[0]-a[0]+o[0],r=o[1]),o[1]!==a[1]&&(r=o[1]-a[1]+o[1],t=o[0])),f(l,[t,r])&&(t=Math.floor(10*Math.random())+1,r=Math.floor(10*Math.random())+1))}}return[t,r]}())||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},playerName:t,fleet:u,placeShip:function(t,e,n,r,a,l){var i=o(t);if(i.name=e,n!==a)for(var c=[n,a].sort((function(t,e){return t-e})),s=c[0];s<=c[1];s++)i.positions.push([s,r]);else for(var f=[r,l].sort((function(t,e){return t-e})),d=f[0];d<=f[1];d++)i.positions.push([n,d]);u.push(i)},receiveAttack:s,enemyHits:n,missedEnemyAttacks:a,sinks:i,allEnemyAttacks:l}}},963:function(t){t.exports=function(t){var e=[],n=[];return{name:"",positions:e,hitPositions:n,isSunk:function(){return this.hitPositions.length===t},length:t,hit:function(t,r){n.push([t,r]),e.splice(function(t,e){for(var n={},r=0;r<e.length;r++)n[e[r]]=r;return n.hasOwnProperty(t)?n[t]:-1}([t,r],e),1)}}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}!function(){var t=n(503),e=t.p1,r=t.CPU,o=t.randomizeShips;function a(){for(var t=["","A","B","C","D","E","F","G","H","I","J"],e=document.getElementById("grid-one"),n=document.getElementById("grid-two");e.hasChildNodes();)e.removeChild(e.lastChild);for(;n.hasChildNodes();)n.removeChild(n.lastChild);for(var r=0;r<t.length;r++){var o=document.createElement("th"),a=document.createElement("th");o.textContent=t[r],a.textContent=t[r],e.appendChild(o),n.appendChild(a)}for(var l=0;l<10;l++){var i=document.createElement("tr"),u=document.createElement("tr"),c=document.createElement("th"),s=document.createElement("th");c.textContent=l+1,s.textContent=l+1,e.appendChild(i).className="table-row",n.appendChild(u).className="table-row",i.appendChild(c).className="table-row-header",u.appendChild(s).className="table-row-header";for(var f=0;f<10;f++){var d=document.createElement("td"),h=document.createElement("td");d.setAttribute("value","".concat(f+1,", ").concat(l+1)),h.setAttribute("value","".concat(f+1,", ").concat(l+1)),d.dataset.index=10*l+f+1,i.appendChild(d).className="gridOne-table-cell",u.appendChild(h).className="gridTwo-table-cell"}}}function l(t){for(var e=t.split(", "),n=[],r=0;r<e.length;r++)n.push(Number(e[r]));return n}var i,u,c,s=function(t,e){return t.every((function(t,n){return t===e[n]}))};function f(){for(var t=document.querySelectorAll(".gridOne-table-cell"),n=0;n<e.fleet.length;n++)for(var r=0;r<e.fleet[n].positions.length;r++)for(var o=0;o<t.length;o++)s(e.fleet[n].positions[r],l(t[o].attributes.value.value))&&(t[o].style.background="rgba(38, 0, 255, 0.8)")}function d(){var t=document.querySelectorAll(".gridTwo-table-cell"),n=document.getElementById("gameboards"),o=document.getElementById("grid-two"),a=document.getElementById("randomize-button");o.addEventListener("click",(function(){a.className+=" inactive-button"}));for(var i=function(o){var a=l(t[o].attributes.value.value)[0],i=l(t[o].attributes.value.value)[1];t[o].addEventListener("click",(function(){e.checkForLoss()||r.checkForLoss()||(function(t){for(var e=l(t.attributes.value.value),n=!1,o=0;o<r.fleet.length;o++)for(var a=0;a<Object.keys(r.fleet[o].positions).length;a++)s(r.fleet[o].positions[a],e)&&(t.style.background="rgba(38, 0, 255, 0.8)",n=!0);!1===n&&(t.style.background="rgb(109, 109, 109)")}(this),r.receiveAttack(a,i),console.log(r),t[o].className+=" inactive")})),t[o].addEventListener("click",(function(){n.className+=" inactive",e.checkForLoss()||r.checkForLoss()||setTimeout((function(){e.receiveCpuAttack(),console.log(e),n.className-=" inactive",function(){for(var t=e.missedEnemyAttacks,n=document.querySelectorAll(".gridOne-table-cell"),r=0;r<t.length;r++)for(var o=0;o<n.length;o++)s(t[r],l(n[o].attributes.value.value))&&(n[o].style.background="rgb(109, 109, 109)");for(var a=0;a<e.fleet.length;a++)for(var i=0;i<Object.keys(e.fleet[a].hitPositions).length;i++)for(var u=0;u<n.length;u++)s(e.fleet[a].hitPositions[i],l(n[u].attributes.value.value))&&(n[u].style.background="rgba(255, 0, 0, 1)")}()}),1e3)}))},u=0;u<t.length;u++)i(u)}function h(){e.enemyHits.length=0,e.missedEnemyAttacks.length=0,e.allEnemyAttacks.length=0,e.sinks.length=0,e.fleet.length=0,r.enemyHits.length=0,r.missedEnemyAttacks.length=0,r.allEnemyAttacks.length=0,r.sinks.length=0,r.fleet.length=0}function m(){document.querySelectorAll(".gridOne-table-cell")[Number(this.dataset.index)+3].style.background="rgb(109, 109, 109)",this.style.background="rgb(109, 109, 109)"}function v(){document.querySelectorAll(".gridOne-table-cell")[Number(this.dataset.index)+3].style.background="",this.style.background=""}function g(t,e){for(var n=document.querySelectorAll(".gridOne-table-cell"),r=t-1,o=function(t){if(e)t+r<100&&t%10+r<10&&(n[t].addEventListener("mouseenter",m),n[t].addEventListener("mouseleave",v));else{var o=10*r;t+o<100&&(n[t].addEventListener("mouseenter",(function(){n[t+o].style.background="rgb(109, 109, 109)"})),n[t].addEventListener("mouseleave",(function(){n[t+o].style.background=""})))}},a=0;a<n.length;a++)o(a)}i=document.getElementById("randomize-button"),u=document.getElementById("new-game-button"),c=document.getElementById("rotate-button"),i.addEventListener("click",(function(){a(),d(),h(),o(e),o(r),f()})),u.addEventListener("click",(function(){i.className-=" inactive-button",a(),d(),h(),o(e),o(r),f()})),c.addEventListener("click",(function(){g(3,!1)})),document.getElementById("status"),a(),d(),g(3,!0),f()}()}();